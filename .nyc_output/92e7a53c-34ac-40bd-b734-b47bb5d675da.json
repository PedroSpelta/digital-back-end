{"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\controllers\\bankingController.ts":{"path":"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\controllers\\bankingController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":26},"end":{"line":15,"column":81}},"16":{"start":{"line":16,"column":24},"end":{"line":16,"column":75}},"17":{"start":{"line":17,"column":28},"end":{"line":17,"column":56}},"18":{"start":{"line":18,"column":16},"end":{"line":38,"column":2}},"19":{"start":{"line":18,"column":36},"end":{"line":38,"column":2}},"20":{"start":{"line":19,"column":4},"end":{"line":37,"column":5}},"21":{"start":{"line":21,"column":29},"end":{"line":21,"column":37}},"22":{"start":{"line":22,"column":22},"end":{"line":22,"column":47}},"23":{"start":{"line":24,"column":8},"end":{"line":25,"column":55}},"24":{"start":{"line":25,"column":12},"end":{"line":25,"column":55}},"25":{"start":{"line":27,"column":28},"end":{"line":30,"column":10}},"26":{"start":{"line":31,"column":8},"end":{"line":33,"column":11}},"27":{"start":{"line":36,"column":8},"end":{"line":36,"column":18}},"28":{"start":{"line":39,"column":17},"end":{"line":59,"column":2}},"29":{"start":{"line":39,"column":37},"end":{"line":59,"column":2}},"30":{"start":{"line":40,"column":4},"end":{"line":58,"column":5}},"31":{"start":{"line":41,"column":46},"end":{"line":41,"column":54}},"32":{"start":{"line":42,"column":22},"end":{"line":42,"column":47}},"33":{"start":{"line":44,"column":8},"end":{"line":45,"column":55}},"34":{"start":{"line":45,"column":12},"end":{"line":45,"column":55}},"35":{"start":{"line":47,"column":34},"end":{"line":51,"column":10}},"36":{"start":{"line":52,"column":8},"end":{"line":54,"column":11}},"37":{"start":{"line":57,"column":8},"end":{"line":57,"column":18}},"38":{"start":{"line":60,"column":0},"end":{"line":60,"column":40}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":16},"end":{"line":18,"column":17}},"loc":{"start":{"line":18,"column":36},"end":{"line":38,"column":2}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":18,"column":70},"end":{"line":18,"column":71}},"loc":{"start":{"line":18,"column":83},"end":{"line":38,"column":1}},"line":18},"10":{"name":"(anonymous_10)","decl":{"start":{"line":39,"column":17},"end":{"line":39,"column":18}},"loc":{"start":{"line":39,"column":37},"end":{"line":59,"column":2}},"line":39},"11":{"name":"(anonymous_11)","decl":{"start":{"line":39,"column":71},"end":{"line":39,"column":72}},"loc":{"start":{"line":39,"column":84},"end":{"line":59,"column":1}},"line":39}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":24,"column":8},"end":{"line":25,"column":55}},"type":"if","locations":[{"start":{"line":24,"column":8},"end":{"line":25,"column":55}},{"start":{"line":24,"column":8},"end":{"line":25,"column":55}}],"line":24},"9":{"loc":{"start":{"line":44,"column":8},"end":{"line":45,"column":55}},"type":"if","locations":[{"start":{"line":44,"column":8},"end":{"line":45,"column":55}},{"start":{"line":44,"column":8},"end":{"line":45,"column":55}}],"line":44}},"s":{"0":1,"1":5,"2":0,"3":8,"4":4,"5":4,"6":0,"7":1,"8":1,"9":0,"10":13,"11":8,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":4,"20":4,"21":4,"22":4,"23":4,"24":2,"25":2,"26":2,"27":2,"28":1,"29":4,"30":4,"31":4,"32":4,"33":4,"34":1,"35":3,"36":2,"37":2,"38":1},"f":{"0":8,"1":5,"2":0,"3":8,"4":4,"5":1,"6":13,"7":2,"8":4,"9":4,"10":4,"11":4},"b":{"0":[1,1,1],"1":[5,0],"2":[8,8],"3":[8,5],"4":[8,8],"5":[1,1,1],"6":[2,0],"7":[2,2],"8":[2,2],"9":[1,3]},"inputSourceMap":{"version":3,"file":"C:/Users/pedro/dev/personal/digital-back-end/src/controllers/bankingController.ts","sources":["C:/Users/pedro/dev/personal/digital-back-end/src/controllers/bankingController.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,kFAA0D;AAC1D,4EAAoD;AACpD,yDAAgD;AAEhD,MAAM,OAAO,GAAuB,CAAO,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;IAC3D,IAAI;QACF,sBAAsB;QACtB,MAAM,EAAE,QAAQ,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;QAC9B,MAAM,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,aAAa,CAAC;QAExC,uBAAuB;QACvB,IAAI,CAAC,KAAK;YAAE,MAAM,uBAAa,CAAC,YAAY,CAAC;QAE7C,0BAA0B;QAC1B,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,yBAAe,CAAC,OAAO,CAAC;YAChD,QAAQ;YACR,KAAK;SACN,CAAC,CAAC;QAEH,OAAO,GAAG,CAAC,MAAM,CAAC,+BAAW,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC;YACrC,OAAO,EAAE,4BAA4B,QAAQ,gBAAgB,OAAO,EAAE;SACvE,CAAC,CAAC;KACJ;IAAC,OAAO,GAAG,EAAE;QACZ,IAAI,CAAC,GAAG,CAAC,CAAC;KACX;AACH,CAAC,CAAA,CAAC;AAEF,MAAM,QAAQ,GAAuB,CAAO,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;IAC5D,IAAI;QACF,MAAM,EAAE,QAAQ,EAAE,eAAe,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;QAC/C,MAAM,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,aAAa,CAAC;QAExC,uBAAuB;QACvB,IAAI,CAAC,KAAK;YAAE,MAAM,uBAAa,CAAC,YAAY,CAAC;QAE7C,eAAe;QACf,MAAM,EAAE,aAAa,EAAE,GAAG,MAAM,yBAAe,CAAC,QAAQ,CAAC;YACvD,eAAe;YACf,QAAQ;YACR,KAAK;SACN,CAAC,CAAC;QAEH,OAAO,GAAG,CAAC,MAAM,CAAC,+BAAW,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC;YACrC,OAAO,EAAE,YAAY,aAAa,+BAA+B,QAAQ,gBAAgB,eAAe,EAAE;SAC3G,CAAC,CAAC;KACJ;IAAC,OAAO,GAAG,EAAE;QACZ,IAAI,CAAC,GAAG,CAAC,CAAC;KACX;AACH,CAAC,CAAA,CAAC;AAEF,kBAAe,EAAE,OAAO,EAAE,QAAQ,EAAE,CAAC","sourcesContent":["import { IExpressController } from '../types/express';\r\nimport bankingServices from '../services/bankingServices';\r\nimport bankingErrors from '../errors/bankingErrors';\r\nimport { StatusCodes } from 'http-status-codes';\r\n\r\nconst deposit: IExpressController = async (req, res, next) => {\r\n  try {\r\n    //getting request data\r\n    const { quantity } = req.body;\r\n    const token = req.headers.authorization;\r\n\r\n    //check token existence\r\n    if (!token) throw bankingErrors.missingToken;\r\n\r\n    //making deposit to the db\r\n    const { account } = await bankingServices.deposit({\r\n      quantity,\r\n      token,\r\n    });\r\n\r\n    return res.status(StatusCodes.OK).json({\r\n      message: `Successfully deposited R$${quantity} on account #${account}`,\r\n    });\r\n  } catch (err) {\r\n    next(err);\r\n  }\r\n};\r\n\r\nconst transfer: IExpressController = async (req, res, next) => {\r\n  try {\r\n    const { quantity, transferAccount } = req.body;\r\n    const token = req.headers.authorization;\r\n\r\n    //check token existence\r\n    if (!token) throw bankingErrors.missingToken;\r\n\r\n    //make transfer\r\n    const { senderAccount } = await bankingServices.transfer({\r\n      transferAccount,\r\n      quantity,\r\n      token,\r\n    });\r\n\r\n    return res.status(StatusCodes.OK).json({\r\n      message: `Account #${senderAccount} successfully transferred R$${quantity} to account #${transferAccount}`,\r\n    });\r\n  } catch (err) {\r\n    next(err);\r\n  }\r\n};\r\n\r\nexport default { deposit, transfer };\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6f3ed4d6dd23a645428e7fac84d2a7d605c863ec","contentHash":"24fe9998436cfb448301f09422a1871995d0863f1b7afc9b5ae846f4cb14deee"},"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\services\\bankingServices.ts":{"path":"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\services\\bankingServices.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":24},"end":{"line":15,"column":75}},"16":{"start":{"line":16,"column":24},"end":{"line":16,"column":75}},"17":{"start":{"line":17,"column":16},"end":{"line":17,"column":57}},"18":{"start":{"line":18,"column":25},"end":{"line":21,"column":1}},"19":{"start":{"line":19,"column":4},"end":{"line":20,"column":54}},"20":{"start":{"line":20,"column":8},"end":{"line":20,"column":54}},"21":{"start":{"line":22,"column":16},"end":{"line":37,"column":2}},"22":{"start":{"line":22,"column":41},"end":{"line":37,"column":2}},"23":{"start":{"line":24,"column":27},"end":{"line":24,"column":63}},"24":{"start":{"line":26,"column":4},"end":{"line":26,"column":31}},"25":{"start":{"line":28,"column":19},"end":{"line":28,"column":44}},"26":{"start":{"line":29,"column":18},"end":{"line":29,"column":48}},"27":{"start":{"line":30,"column":27},"end":{"line":30,"column":81}},"28":{"start":{"line":32,"column":28},"end":{"line":35,"column":5}},"29":{"start":{"line":36,"column":4},"end":{"line":36,"column":27}},"30":{"start":{"line":38,"column":17},"end":{"line":56,"column":2}},"31":{"start":{"line":38,"column":59},"end":{"line":56,"column":2}},"32":{"start":{"line":40,"column":29},"end":{"line":40,"column":65}},"33":{"start":{"line":42,"column":4},"end":{"line":42,"column":31}},"34":{"start":{"line":44,"column":23},"end":{"line":44,"column":82}},"35":{"start":{"line":45,"column":4},"end":{"line":46,"column":56}},"36":{"start":{"line":46,"column":8},"end":{"line":46,"column":56}},"37":{"start":{"line":48,"column":27},"end":{"line":48,"column":55}},"38":{"start":{"line":49,"column":26},"end":{"line":49,"column":56}},"39":{"start":{"line":50,"column":4},"end":{"line":50,"column":75}},"40":{"start":{"line":52,"column":25},"end":{"line":52,"column":52}},"41":{"start":{"line":53,"column":24},"end":{"line":53,"column":55}},"42":{"start":{"line":54,"column":4},"end":{"line":54,"column":71}},"43":{"start":{"line":55,"column":4},"end":{"line":55,"column":49}},"44":{"start":{"line":57,"column":0},"end":{"line":57,"column":40}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":25},"end":{"line":18,"column":26}},"loc":{"start":{"line":18,"column":39},"end":{"line":21,"column":1}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":22,"column":16},"end":{"line":22,"column":17}},"loc":{"start":{"line":22,"column":41},"end":{"line":37,"column":2}},"line":22},"10":{"name":"(anonymous_10)","decl":{"start":{"line":22,"column":75},"end":{"line":22,"column":76}},"loc":{"start":{"line":22,"column":88},"end":{"line":37,"column":1}},"line":22},"11":{"name":"(anonymous_11)","decl":{"start":{"line":38,"column":17},"end":{"line":38,"column":18}},"loc":{"start":{"line":38,"column":59},"end":{"line":56,"column":2}},"line":38},"12":{"name":"(anonymous_12)","decl":{"start":{"line":38,"column":93},"end":{"line":38,"column":94}},"loc":{"start":{"line":38,"column":106},"end":{"line":56,"column":1}},"line":38}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":19,"column":4},"end":{"line":20,"column":54}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":20,"column":54}},{"start":{"line":19,"column":4},"end":{"line":20,"column":54}}],"line":19},"9":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":71}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":23}},{"start":{"line":19,"column":27},"end":{"line":19,"column":39}},{"start":{"line":19,"column":43},"end":{"line":19,"column":71}}],"line":19},"10":{"loc":{"start":{"line":45,"column":4},"end":{"line":46,"column":56}},"type":"if","locations":[{"start":{"line":45,"column":4},"end":{"line":46,"column":56}},{"start":{"line":45,"column":4},"end":{"line":46,"column":56}}],"line":45}},"s":{"0":1,"1":6,"2":0,"3":8,"4":6,"5":6,"6":1,"7":0,"8":0,"9":0,"10":9,"11":8,"12":1,"13":3,"14":1,"15":1,"16":1,"17":1,"18":1,"19":6,"20":2,"21":1,"22":3,"23":3,"24":2,"25":2,"26":2,"27":2,"28":2,"29":2,"30":1,"31":5,"32":5,"33":4,"34":2,"35":2,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1},"f":{"0":8,"1":6,"2":0,"3":8,"4":6,"5":0,"6":9,"7":3,"8":6,"9":3,"10":3,"11":5,"12":5},"b":{"0":[1,1,1],"1":[6,0],"2":[8,8],"3":[3,6],"4":[8,8],"5":[1,1,1],"6":[3,0],"7":[3,3],"8":[2,4],"9":[6,6,4],"10":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/pedro/dev/personal/digital-back-end/src/services/bankingServices.ts","sources":["C:/Users/pedro/dev/personal/digital-back-end/src/services/bankingServices.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,4EAAoD;AAEpD,4EAAoD;AACpD,0DAAqC;AAErC,MAAM,gBAAgB,GAAG,CAAC,QAAgB,EAAE,EAAE;IAC5C,IAAI,QAAQ,GAAG,IAAI,IAAI,QAAQ,GAAG,CAAC,IAAI,OAAO,QAAQ,KAAK,QAAQ;QACjE,MAAM,uBAAa,CAAC,eAAe,CAAC;AACxC,CAAC,CAAC;AAEF,MAAM,OAAO,GAAG,CAAO,EAAE,QAAQ,EAAE,KAAK,EAAe,EAAE,EAAE;IACzD,gBAAgB;IAChB,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,eAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IAErD,mBAAmB;IACnB,gBAAgB,CAAC,QAAQ,CAAC,CAAC;IAE3B,qCAAqC;IACrC,MAAM,MAAM,GAAG,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC;IACzC,MAAM,KAAK,GAAG,EAAE,IAAI,EAAE,EAAE,MAAM,EAAE,QAAQ,EAAE,EAAE,CAAC;IAC7C,MAAM,cAAc,GAAG,MAAM,uBAAa,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IAEpE,yCAAyC;IACzC,MAAM,eAAe,GAAG;QACtB,IAAI,EAAE,cAAc,CAAC,YAAY;QACjC,OAAO,EAAE,IAAI,CAAC,OAAO;KACtB,CAAC;IACF,OAAO,eAAe,CAAC;AACzB,CAAC,CAAA,CAAC;AAEF,MAAM,QAAQ,GAAG,CAAO,EAAE,eAAe,EAAE,QAAQ,EAAE,KAAK,EAAgB,EAAE,EAAE;IAC5E,gBAAgB;IAChB,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,eAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IAEvD,mBAAmB;IACnB,gBAAgB,CAAC,QAAQ,CAAC,CAAC;IAE3B,sCAAsC;IACtC,MAAM,UAAU,GAAG,MAAM,uBAAa,CAAC,aAAa,CAAC,MAAM,CAAC,OAAO,CAAQ,CAAC;IAC5E,IAAI,UAAU,CAAC,MAAM,GAAG,QAAQ;QAAE,MAAM,uBAAa,CAAC,iBAAiB,CAAC;IAExE,sCAAsC;IACtC,MAAM,cAAc,GAAG,EAAE,OAAO,EAAE,eAAe,EAAE,CAAC;IACpD,MAAM,aAAa,GAAG,EAAE,IAAI,EAAE,EAAE,MAAM,EAAE,QAAQ,EAAE,EAAE,CAAC;IACrD,MAAM,uBAAa,CAAC,SAAS,CAC3B,cAAc,EACd,aAAa,CACd,CAAC;IAEF,4CAA4C;IAC5C,MAAM,YAAY,GAAG,EAAE,OAAO,EAAE,MAAM,CAAC,OAAO,EAAE,CAAC;IACjD,MAAM,WAAW,GAAG,EAAE,IAAI,EAAE,EAAE,MAAM,EAAE,CAAC,QAAQ,EAAE,EAAE,CAAC;IACpD,MAAM,uBAAa,CAAC,SAAS,CAC3B,YAAY,EACZ,WAAW,CACZ,CAAC;IAEF,OAAO,EAAE,aAAa,EAAE,UAAU,CAAC,OAAO,EAAE,CAAC;AAC/C,CAAC,CAAA,CAAC;AAEF,kBAAe,EAAE,OAAO,EAAE,QAAQ,EAAE,CAAC","sourcesContent":["import { IDepositReq, ITransferReq } from '../types/transfer';\r\nimport bankingErrors from '../errors/bankingErrors';\r\n\r\nimport bankingModels from '../models/bankingModels';\r\nimport jwtToken from '../auth/token';\r\n\r\nconst validateQuantity = (quantity: number) => {\r\n  if (quantity > 2000 || quantity < 0 || typeof quantity === 'string')\r\n    throw bankingErrors.invalidQuantity;\r\n};\r\n\r\nconst deposit = async ({ quantity, token }: IDepositReq) => {\r\n  //validate token\r\n  const { data: user } = jwtToken.validateToken(token);\r\n\r\n  //validate quantity\r\n  validateQuantity(quantity);\r\n\r\n  //create query to update wallet value\r\n  const filter = { account: user.account };\r\n  const query = { $inc: { wallet: quantity } };\r\n  const updateResponse = await bankingModels.updateOne(filter, query);\r\n\r\n  //create object to respond the controller\r\n  const depositResponse = {\r\n    done: updateResponse.acknowledged,\r\n    account: user.account,\r\n  };\r\n  return depositResponse;\r\n};\r\n\r\nconst transfer = async ({ transferAccount, quantity, token }: ITransferReq) => {\r\n  //validate token\r\n  const { data: sender } = jwtToken.validateToken(token);\r\n\r\n  //validate quantity\r\n  validateQuantity(quantity);\r\n\r\n  //validate sender has enough in wallet\r\n  const senderData = await bankingModels.findByAccount(sender.account) as any;\r\n  if (senderData.wallet < quantity) throw bankingErrors.notEnoughTransfer;\r\n\r\n  // create query to update wallet value\r\n  const filterReceiver = { account: transferAccount };\r\n  const queryReceiver = { $inc: { wallet: quantity } };\r\n  await bankingModels.updateOne(\r\n    filterReceiver,\r\n    queryReceiver\r\n  );\r\n\r\n  //create query to update sender wallet value\r\n  const filterSender = { account: sender.account };\r\n  const querySender = { $inc: { wallet: -quantity } };\r\n  await bankingModels.updateOne(\r\n    filterSender,\r\n    querySender\r\n  );\r\n\r\n  return { senderAccount: senderData.account };\r\n};\r\n\r\nexport default { deposit, transfer };\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2fa9d512a4ecc5bab3c283cc2669fa7ccf4b94d0","contentHash":"2bd2abd563a986803a981a80ce0abdfeaaae360bd6de7f146709019e32679bc7"},"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\errors\\bankingErrors.ts":{"path":"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\errors\\bankingErrors.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":56}},"2":{"start":{"line":4,"column":22},"end":{"line":25,"column":1}},"3":{"start":{"line":26,"column":0},"end":{"line":26,"column":32}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/pedro/dev/personal/digital-back-end/src/errors/bankingErrors.ts","sources":["C:/Users/pedro/dev/personal/digital-back-end/src/errors/bankingErrors.ts"],"names":[],"mappings":";;AAAA,yDAAgD;AAEhD,MAAM,aAAa,GAAG;IACpB,YAAY,EAAE;QACZ,MAAM,EAAE,+BAAW,CAAC,WAAW;QAC/B,OAAO,EAAE,6BAA6B;KACvC;IACD,aAAa,EAAE;QACb,MAAM,EAAE,+BAAW,CAAC,WAAW;QAC/B,OAAO,EACL,uFAAuF;KAC1F;IACD,eAAe,EAAE;QACf,MAAM,EAAE,+BAAW,CAAC,WAAW;QAC/B,OAAO,EACL,8EAA8E;KACjF;IACD,iBAAiB,EAAE;QACjB,MAAM,EAAE,+BAAW,CAAC,WAAW;QAC/B,OAAO,EACL,2EAA2E;KAC9E;IACD,YAAY,EAAC;QACX,MAAM,EAAE,+BAAW,CAAC,WAAW;QAC/B,OAAO,EACL,gEAAgE;KACnE;CACF,CAAC;AAEF,kBAAe,aAAa,CAAC","sourcesContent":["import { StatusCodes } from 'http-status-codes';\r\n\r\nconst bankingErrors = {\r\n  missingToken: {\r\n    status: StatusCodes.BAD_REQUEST,\r\n    message: 'Missing token on the header',\r\n  },\r\n  invalidFormat: {\r\n    status: StatusCodes.BAD_REQUEST,\r\n    message:\r\n      'Invalid format. Account is a string of 5 digits and password is a string of 6 digits.',\r\n  },\r\n  invalidQuantity: {\r\n    status: StatusCodes.BAD_REQUEST,\r\n    message:\r\n      'Invalid quantity, amount need to be positive number and smaller then R$2000.',\r\n  },\r\n  notEnoughTransfer: {\r\n    status: StatusCodes.BAD_REQUEST,\r\n    message:\r\n      'Your account do not have enough money on wallet to make the transference.',\r\n  },\r\n  invalidToken:{\r\n    status: StatusCodes.BAD_REQUEST,\r\n    message:\r\n      'Invalid token. You need to be log in to receive a valid token.',\r\n  }\r\n};\r\n\r\nexport default bankingErrors;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"90d984471c891f89d543ab8ef26d35d405396404","contentHash":"f6faaa14ecabd08e3ef1a256563e17f32e777037784505d476b52c73818a53ed"},"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\models\\bankingModels.ts":{"path":"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\models\\bankingModels.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":22},"end":{"line":15,"column":63}},"16":{"start":{"line":16,"column":22},"end":{"line":19,"column":2}},"17":{"start":{"line":16,"column":35},"end":{"line":19,"column":2}},"18":{"start":{"line":17,"column":26},"end":{"line":17,"column":82}},"19":{"start":{"line":18,"column":4},"end":{"line":18,"column":25}},"20":{"start":{"line":20,"column":18},"end":{"line":23,"column":2}},"21":{"start":{"line":20,"column":37},"end":{"line":23,"column":2}},"22":{"start":{"line":21,"column":27},"end":{"line":21,"column":87}},"23":{"start":{"line":22,"column":4},"end":{"line":22,"column":26}},"24":{"start":{"line":24,"column":0},"end":{"line":24,"column":47}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":16,"column":22},"end":{"line":16,"column":23}},"loc":{"start":{"line":16,"column":35},"end":{"line":19,"column":2}},"line":16},"9":{"name":"(anonymous_9)","decl":{"start":{"line":16,"column":69},"end":{"line":16,"column":70}},"loc":{"start":{"line":16,"column":82},"end":{"line":19,"column":1}},"line":16},"10":{"name":"(anonymous_10)","decl":{"start":{"line":20,"column":18},"end":{"line":20,"column":19}},"loc":{"start":{"line":20,"column":37},"end":{"line":23,"column":2}},"line":20},"11":{"name":"(anonymous_11)","decl":{"start":{"line":20,"column":71},"end":{"line":20,"column":72}},"loc":{"start":{"line":20,"column":84},"end":{"line":23,"column":1}},"line":20}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":3,"2":0,"3":3,"4":3,"5":3,"6":0,"7":0,"8":0,"9":0,"10":6,"11":3,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":2,"22":2,"23":2,"24":1},"f":{"0":3,"1":3,"2":0,"3":3,"4":3,"5":0,"6":6,"7":1,"8":1,"9":1,"10":2,"11":2},"b":{"0":[1,1,1],"1":[3,0],"2":[3,3],"3":[3,3],"4":[3,3],"5":[1,1,1],"6":[1,0],"7":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/pedro/dev/personal/digital-back-end/src/models/bankingModels.ts","sources":["C:/Users/pedro/dev/personal/digital-back-end/src/models/bankingModels.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAEA,gEAAwC;AAExC,MAAM,aAAa,GAAG,CAAO,OAAe,EAAE,EAAE;IAC9C,MAAM,aAAa,GAAG,MAAM,qBAAW,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,EAAE,MAAM,CAAC,CAAC;IACrE,OAAO,aAAa,CAAC;AACvB,CAAC,CAAA,CAAC;AAEF,MAAM,SAAS,GAAG,CAAO,MAAwB,EAAE,KAAuB,EAAE,EAAE;IAC5E,MAAM,cAAc,GAAG,MAAM,qBAAW,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;IAC1E,OAAO,cAAc,CAAC;AACxB,CAAC,CAAA,CAAC;AAEF,kBAAe,EAAE,aAAa,EAAE,SAAS,EAAE,CAAC","sourcesContent":["import { Document, Filter } from 'mongodb';\r\nimport { connectToDatabase } from './connection';\r\nimport mongoModels from './mongoModels';\r\n\r\nconst findByAccount = async (account: string) => {\r\n  const foundResponse = await mongoModels.findOne({ account }, 'user');  \r\n  return foundResponse;\r\n};\r\n\r\nconst updateOne = async (filter: Filter<Document>, query: Filter<Document>) => {  \r\n  const updateResponse = await mongoModels.updateOne(filter, query, 'user');\r\n  return updateResponse;\r\n};\r\n\r\nexport default { findByAccount, updateOne };\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b73f5a9c69ee9f699454e7008d5e00e204cc3d1a","contentHash":"9c194876fd95f24cf7a761c1c0effa58e798a1caf6d06c48dee7e681427255f4"},"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\models\\mongoModels.ts":{"path":"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\models\\mongoModels.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"13":{"start":{"line":12,"column":21},"end":{"line":12,"column":44}},"14":{"start":{"line":13,"column":16},"end":{"line":18,"column":2}},"15":{"start":{"line":13,"column":39},"end":{"line":18,"column":2}},"16":{"start":{"line":14,"column":17},"end":{"line":14,"column":60}},"17":{"start":{"line":15,"column":17},"end":{"line":15,"column":44}},"18":{"start":{"line":16,"column":23},"end":{"line":16,"column":42}},"19":{"start":{"line":17,"column":4},"end":{"line":17,"column":22}},"20":{"start":{"line":19,"column":18},"end":{"line":24,"column":2}},"21":{"start":{"line":19,"column":49},"end":{"line":24,"column":2}},"22":{"start":{"line":20,"column":17},"end":{"line":20,"column":60}},"23":{"start":{"line":21,"column":17},"end":{"line":21,"column":44}},"24":{"start":{"line":22,"column":25},"end":{"line":22,"column":54}},"25":{"start":{"line":23,"column":4},"end":{"line":23,"column":24}},"26":{"start":{"line":25,"column":0},"end":{"line":25,"column":41}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":13,"column":16},"end":{"line":13,"column":17}},"loc":{"start":{"line":13,"column":39},"end":{"line":18,"column":2}},"line":13},"8":{"name":"(anonymous_8)","decl":{"start":{"line":13,"column":73},"end":{"line":13,"column":74}},"loc":{"start":{"line":13,"column":86},"end":{"line":18,"column":1}},"line":13},"9":{"name":"(anonymous_9)","decl":{"start":{"line":19,"column":18},"end":{"line":19,"column":19}},"loc":{"start":{"line":19,"column":49},"end":{"line":24,"column":2}},"line":19},"10":{"name":"(anonymous_10)","decl":{"start":{"line":19,"column":83},"end":{"line":19,"column":84}},"loc":{"start":{"line":19,"column":96},"end":{"line":24,"column":1}},"line":19}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8}},"s":{"0":1,"1":8,"2":0,"3":8,"4":8,"5":8,"6":0,"7":0,"8":0,"9":0,"10":16,"11":8,"12":1,"13":1,"14":1,"15":6,"16":6,"17":6,"18":6,"19":6,"20":1,"21":2,"22":2,"23":2,"24":2,"25":2,"26":1},"f":{"0":8,"1":8,"2":0,"3":8,"4":8,"5":0,"6":16,"7":6,"8":6,"9":2,"10":2},"b":{"0":[1,1,1],"1":[8,0],"2":[8,8],"3":[8,8],"4":[8,8]},"inputSourceMap":{"version":3,"file":"C:/Users/pedro/dev/personal/digital-back-end/src/models/mongoModels.ts","sources":["C:/Users/pedro/dev/personal/digital-back-end/src/models/mongoModels.ts"],"names":[],"mappings":";;;;;;;;;;;AACA,6CAAiD;AAEjD,MAAM,OAAO,GAAG,CAAO,KAAuB,EAAE,UAAkB,EAAE,EAAE;IACpE,MAAM,IAAI,GAAG,MAAM,IAAA,8BAAiB,GAAE,CAAC;IACvC,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;IACzC,MAAM,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IACvC,OAAO,UAAU,CAAC;AACpB,CAAC,CAAA,CAAC;AAEF,MAAM,SAAS,GAAG,CAChB,MAAwB,EACxB,KAAuB,EACvB,UAAkB,EAClB,EAAE;IACF,MAAM,IAAI,GAAG,MAAM,IAAA,8BAAiB,GAAE,CAAC;IAEvC,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;IACzC,MAAM,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IACnD,OAAO,YAAY,CAAC;AACtB,CAAC,CAAA,CAAC;AAEF,kBAAe,EAAE,OAAO,EAAE,SAAS,EAAE,CAAC","sourcesContent":["import { Document, Filter } from 'mongodb';\r\nimport { connectToDatabase } from './connection';\r\n\r\nconst findOne = async (query: Filter<Document>, collection: string) => {\r\n  const conn = await connectToDatabase();\r\n  const coll = conn.collection(collection);\r\n  const findResult = coll.findOne(query);\r\n  return findResult;\r\n};\r\n\r\nconst updateOne = async (\r\n  filter: Filter<Document>,\r\n  query: Filter<Document>,\r\n  collection: string\r\n) => {\r\n  const conn = await connectToDatabase();\r\n  \r\n  const coll = conn.collection(collection);\r\n  const updateResult = coll.updateOne(filter, query);\r\n  return updateResult;\r\n};\r\n\r\nexport default { findOne, updateOne };\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f08ef2143ef7980705ab98b1241bf627317451fc","contentHash":"4774d7d0d40a0de7f4091b77197c2c9a9905de6cfa8f764d7735b9ec12d95c37"},"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\models\\connection.ts":{"path":"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\models\\connection.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"13":{"start":{"line":12,"column":0},"end":{"line":12,"column":35}},"14":{"start":{"line":13,"column":18},"end":{"line":13,"column":36}},"15":{"start":{"line":14,"column":0},"end":{"line":14,"column":27}},"16":{"start":{"line":15,"column":43},"end":{"line":15,"column":54}},"17":{"start":{"line":16,"column":9},"end":{"line":16,"column":13}},"18":{"start":{"line":18,"column":4},"end":{"line":25,"column":7}},"19":{"start":{"line":19,"column":8},"end":{"line":24,"column":15}},"20":{"start":{"line":22,"column":16},"end":{"line":22,"column":49}},"21":{"start":{"line":23,"column":16},"end":{"line":23,"column":26}},"22":{"start":{"line":27,"column":0},"end":{"line":27,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"connectToDatabase","decl":{"start":{"line":17,"column":9},"end":{"line":17,"column":26}},"loc":{"start":{"line":17,"column":29},"end":{"line":26,"column":1}},"line":17},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":43},"end":{"line":18,"column":44}},"loc":{"start":{"line":18,"column":56},"end":{"line":25,"column":5}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":21,"column":66},"end":{"line":21,"column":67}},"loc":{"start":{"line":21,"column":76},"end":{"line":24,"column":13}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":19,"column":15},"end":{"line":24,"column":14}},"type":"cond-expr","locations":[{"start":{"line":20,"column":14},"end":{"line":20,"column":33}},{"start":{"line":21,"column":14},"end":{"line":24,"column":14}}],"line":19}},"s":{"0":1,"1":0,"2":0,"3":19,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":19,"11":19,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":19,"19":19,"20":1,"21":1,"22":1},"f":{"0":19,"1":0,"2":0,"3":19,"4":0,"5":0,"6":19,"7":19,"8":19,"9":1},"b":{"0":[1,1,1],"1":[0,0],"2":[19,19],"3":[19,0],"4":[19,19],"5":[18,1]},"inputSourceMap":{"version":3,"file":"C:/Users/pedro/dev/personal/digital-back-end/src/models/connection.ts","sources":["C:/Users/pedro/dev/personal/digital-back-end/src/models/connection.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,qCAA0C;AAC1C,OAAO,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAC;AAE3B,MAAM,EAAE,eAAe,EAAE,aAAa,EAAE,GAAG,OAAO,CAAC,GAAG,CAAC;AAEvD,IAAI,EAAE,GAAc,IAAI,CAAC;AAEzB,SAAsB,iBAAiB;;QACrC,OAAO,EAAE;YACP,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC;YACrB,CAAC,CAAC,qBAAW,CAAC,OAAO,CAAC,eAAyB,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE;gBAC3D,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,GAAG,aAAa,EAAE,CAAC,CAAC;gBACjC,OAAO,EAAE,CAAC;YACZ,CAAC,CAAC,CAAC;IACT,CAAC;CAAA;AAPD,8CAOC","sourcesContent":["import { Db, MongoClient } from 'mongodb';\r\nrequire('dotenv').config();\r\n\r\nconst { MONGO_DB_STRING, MONGO_DB_NAME } = process.env;\r\n\r\nlet db: Db | null = null;\r\n\r\nexport async function connectToDatabase() {\r\n  return db\r\n    ? Promise.resolve(db)\r\n    : MongoClient.connect(MONGO_DB_STRING as string).then((conn) => {\r\n        db = conn.db(`${MONGO_DB_NAME}`);\r\n        return db;\r\n      });\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"eb6d5048b7f22ecccbb05f6a7c8e4282a54a4e29","contentHash":"5b043b169df45d6fe18fc61fbb00c92fed4005ec810ec38dce5ff8c1f7331e46"},"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\auth\\token.ts":{"path":"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\auth\\token.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":55}},"4":{"start":{"line":7,"column":23},"end":{"line":7,"column":46}},"5":{"start":{"line":8,"column":24},"end":{"line":8,"column":75}},"6":{"start":{"line":9,"column":18},"end":{"line":12,"column":1}},"7":{"start":{"line":13,"column":19},"end":{"line":13,"column":65}},"8":{"start":{"line":14,"column":22},"end":{"line":16,"column":1}},"9":{"start":{"line":15,"column":4},"end":{"line":15,"column":75}},"10":{"start":{"line":17,"column":0},"end":{"line":17,"column":38}},"11":{"start":{"line":18,"column":22},"end":{"line":26,"column":1}},"12":{"start":{"line":19,"column":4},"end":{"line":25,"column":5}},"13":{"start":{"line":20,"column":21},"end":{"line":20,"column":66}},"14":{"start":{"line":21,"column":8},"end":{"line":21,"column":39}},"15":{"start":{"line":24,"column":8},"end":{"line":24,"column":51}},"16":{"start":{"line":27,"column":0},"end":{"line":27,"column":38}},"17":{"start":{"line":28,"column":0},"end":{"line":31,"column":2}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":22},"end":{"line":14,"column":23}},"loc":{"start":{"line":14,"column":32},"end":{"line":16,"column":1}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":18,"column":22},"end":{"line":18,"column":23}},"loc":{"start":{"line":18,"column":33},"end":{"line":26,"column":1}},"line":18}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":13,"column":19},"end":{"line":13,"column":65}},"type":"binary-expr","locations":[{"start":{"line":13,"column":19},"end":{"line":13,"column":41}},{"start":{"line":13,"column":45},"end":{"line":13,"column":65}}],"line":13}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":3,"13":3,"14":1,"15":2,"16":1,"17":1},"f":{"0":1,"1":1,"2":3},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[1,0]},"inputSourceMap":{"version":3,"file":"C:/Users/pedro/dev/personal/digital-back-end/src/auth/token.ts","sources":["C:/Users/pedro/dev/personal/digital-back-end/src/auth/token.ts"],"names":[],"mappings":";;;;;;AAAA,+CAAmE;AACnE,4EAAoD;AAGpD,MAAM,SAAS,GAAG;IAChB,SAAS,EAAE,IAAI;IACf,SAAS,EAAE,OAAoB;CAChC,CAAC;AACF,MAAM,UAAU,GAAG,OAAO,CAAC,GAAG,CAAC,UAAU,IAAI,oBAAoB,CAAC;AAE3D,MAAM,aAAa,GAAG,CAAC,IAAe,EAAE,EAAE;IAC/C,OAAO,IAAA,mBAAI,EAAC,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,UAAU,EAAE,SAAS,CAAC,CAAC;AACrD,CAAC,CAAC;AAFW,QAAA,aAAa,iBAExB;AAEK,MAAM,aAAa,GAAG,CAAC,KAAa,EAAE,EAAE;IAC7C,IAAI;QACF,MAAM,IAAI,GAAG,IAAA,qBAAM,EAAC,KAAK,EAAE,UAAU,CAAe,CAAC;QACrD,yBAAY,IAAI,EAAG;KACpB;IAAC,OAAO,GAAG,EAAE;QACZ,MAAM,uBAAa,CAAC,YAAY,CAAC;KAClC;AACH,CAAC,CAAC;AAPW,QAAA,aAAa,iBAOxB;AAEF,kBAAe;IACb,aAAa,EAAb,qBAAa;IACb,aAAa,EAAb,qBAAa;CACd,CAAC","sourcesContent":["import { Algorithm, JwtPayload, sign, verify } from 'jsonwebtoken';\r\nimport bankingErrors from '../errors/bankingErrors';\r\nimport { ILoginReq } from '../types/user';\r\n\r\nconst jwtConfig = {\r\n  expiresIn: '7d',\r\n  algorithm: 'HS256' as Algorithm,\r\n};\r\nconst JWT_SECRET = process.env.JWT_SECRET || 'super_duper_secret';\r\n\r\nexport const generateToken = (user: ILoginReq) => {\r\n  return sign({ data: user }, JWT_SECRET, jwtConfig);\r\n};\r\n\r\nexport const validateToken = (token: string) => {\r\n  try {\r\n    const data = verify(token, JWT_SECRET) as JwtPayload;\r\n    return { ...data };\r\n  } catch (err) {\r\n    throw bankingErrors.invalidToken;\r\n  }\r\n};\r\n\r\nexport default {\r\n  generateToken,\r\n  validateToken,\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"bee61704c19d180cf59e429f075d882b8bc4d0ee","contentHash":"6ab86090fe0fbb03e6fc39c8baedc42a4b7367174367163485b94f46bd2c5dfc"},"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\controllers\\userController.ts":{"path":"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\controllers\\userController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":23},"end":{"line":15,"column":75}},"16":{"start":{"line":16,"column":28},"end":{"line":16,"column":56}},"17":{"start":{"line":17,"column":15},"end":{"line":27,"column":2}},"18":{"start":{"line":17,"column":35},"end":{"line":27,"column":2}},"19":{"start":{"line":18,"column":4},"end":{"line":26,"column":5}},"20":{"start":{"line":19,"column":21},"end":{"line":19,"column":29}},"21":{"start":{"line":20,"column":31},"end":{"line":20,"column":72}},"22":{"start":{"line":21,"column":25},"end":{"line":21,"column":71}},"23":{"start":{"line":22,"column":8},"end":{"line":22,"column":82}},"24":{"start":{"line":25,"column":8},"end":{"line":25,"column":18}},"25":{"start":{"line":28,"column":14},"end":{"line":37,"column":2}},"26":{"start":{"line":28,"column":34},"end":{"line":37,"column":2}},"27":{"start":{"line":29,"column":4},"end":{"line":36,"column":5}},"28":{"start":{"line":30,"column":38},"end":{"line":30,"column":46}},"29":{"start":{"line":31,"column":30},"end":{"line":31,"column":87}},"30":{"start":{"line":32,"column":8},"end":{"line":32,"column":93}},"31":{"start":{"line":35,"column":8},"end":{"line":35,"column":18}},"32":{"start":{"line":38,"column":0},"end":{"line":38,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":17,"column":15},"end":{"line":17,"column":16}},"loc":{"start":{"line":17,"column":35},"end":{"line":27,"column":2}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":17,"column":69},"end":{"line":17,"column":70}},"loc":{"start":{"line":17,"column":82},"end":{"line":27,"column":1}},"line":17},"10":{"name":"(anonymous_10)","decl":{"start":{"line":28,"column":14},"end":{"line":28,"column":15}},"loc":{"start":{"line":28,"column":34},"end":{"line":37,"column":2}},"line":28},"11":{"name":"(anonymous_11)","decl":{"start":{"line":28,"column":68},"end":{"line":28,"column":69}},"loc":{"start":{"line":28,"column":81},"end":{"line":37,"column":1}},"line":28}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":6,"2":0,"3":6,"4":4,"5":4,"6":0,"7":2,"8":2,"9":0,"10":12,"11":6,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":3,"19":3,"20":3,"21":3,"22":2,"23":2,"24":1,"25":1,"26":3,"27":3,"28":3,"29":3,"30":2,"31":1,"32":1},"f":{"0":6,"1":6,"2":0,"3":6,"4":4,"5":2,"6":12,"7":1,"8":3,"9":3,"10":3,"11":3},"b":{"0":[1,1,1],"1":[6,0],"2":[6,6],"3":[6,6],"4":[6,6],"5":[1,1,1],"6":[1,0],"7":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/pedro/dev/personal/digital-back-end/src/controllers/userController.ts","sources":["C:/Users/pedro/dev/personal/digital-back-end/src/controllers/userController.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,4EAAoD;AACpD,yDAAgD;AAEhD,MAAM,MAAM,GAAuB,CAAO,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;IAC1D,IAAI;QACF,MAAM,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;QACtB,MAAM,cAAc,GAAG,MAAM,sBAAY,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAEvD,MAAM,QAAQ,GAAG,EAAE,OAAO,EAAE,2BAA2B,EAAE,IAAI,EAAE,CAAC;QAChE,OAAO,GAAG,CAAC,MAAM,CAAC,+BAAW,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KACvD;IAAC,OAAO,GAAG,EAAE;QACZ,IAAI,CAAC,GAAG,CAAC,CAAC;KACX;AACH,CAAC,CAAA,CAAC;AAEF,MAAM,KAAK,GAAuB,CAAO,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;IACzD,IAAI;QACF,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;QACvC,MAAM,aAAa,GAAG,MAAM,sBAAY,CAAC,KAAK,CAAC,EAAE,OAAO,EAAE,QAAQ,EAAE,CAAC,CAAC;QACtE,OAAO,GAAG,CAAC,MAAM,CAAC,+BAAW,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,aAAa,EAAE,CAAC,CAAC;KAClE;IAAC,OAAO,GAAG,EAAE;QACZ,IAAI,CAAC,GAAG,CAAC,CAAC;KACX;AACH,CAAC,CAAA,CAAC;AAEF,kBAAe,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC","sourcesContent":["import { IExpressController } from '../types/express';\r\nimport userServices from '../services/userServices';\r\nimport { StatusCodes } from 'http-status-codes';\r\n\r\nconst create: IExpressController = async (req, res, next) => {\r\n  try {\r\n    const user = req.body;\r\n    const createResponse = await userServices.create(user);\r\n\r\n    const response = { message: 'User created successfully', user };\r\n    return res.status(StatusCodes.CREATED).json(response);\r\n  } catch (err) {\r\n    next(err);\r\n  }\r\n};\r\n\r\nconst login: IExpressController = async (req, res, next) => {\r\n  try {\r\n    const { account, password } = req.body;\r\n    const loginResponse = await userServices.login({ account, password });\r\n    return res.status(StatusCodes.OK).json({ token: loginResponse });\r\n  } catch (err) {\r\n    next(err);\r\n  }\r\n};\r\n\r\nexport default { create, login };\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8d4f8c31a4a815cbbfe217db3717faffa04107f8","contentHash":"df914cf6f6c7feee18c234033c0c49b9b5e6bb909691881d9384ab70890894b7"},"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\services\\userServices.ts":{"path":"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\services\\userServices.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":21},"end":{"line":15,"column":69}},"16":{"start":{"line":16,"column":21},"end":{"line":16,"column":69}},"17":{"start":{"line":17,"column":20},"end":{"line":17,"column":47}},"18":{"start":{"line":18,"column":16},"end":{"line":18,"column":57}},"19":{"start":{"line":19,"column":20},"end":{"line":19,"column":47}},"20":{"start":{"line":20,"column":15},"end":{"line":30,"column":2}},"21":{"start":{"line":20,"column":25},"end":{"line":30,"column":2}},"22":{"start":{"line":21,"column":25},"end":{"line":21,"column":56}},"23":{"start":{"line":22,"column":4},"end":{"line":23,"column":48}},"24":{"start":{"line":23,"column":8},"end":{"line":23,"column":48}},"25":{"start":{"line":24,"column":23},"end":{"line":24,"column":69}},"26":{"start":{"line":25,"column":4},"end":{"line":26,"column":53}},"27":{"start":{"line":26,"column":8},"end":{"line":26,"column":53}},"28":{"start":{"line":27,"column":25},"end":{"line":27,"column":69}},"29":{"start":{"line":28,"column":4},"end":{"line":28,"column":56}},"30":{"start":{"line":29,"column":4},"end":{"line":29,"column":16}},"31":{"start":{"line":31,"column":14},"end":{"line":44,"column":2}},"32":{"start":{"line":31,"column":24},"end":{"line":44,"column":2}},"33":{"start":{"line":33,"column":26},"end":{"line":33,"column":58}},"34":{"start":{"line":34,"column":4},"end":{"line":35,"column":49}},"35":{"start":{"line":35,"column":8},"end":{"line":35,"column":49}},"36":{"start":{"line":37,"column":22},"end":{"line":37,"column":76}},"37":{"start":{"line":38,"column":4},"end":{"line":40,"column":5}},"38":{"start":{"line":39,"column":8},"end":{"line":39,"column":52}},"39":{"start":{"line":42,"column":18},"end":{"line":42,"column":53}},"40":{"start":{"line":43,"column":4},"end":{"line":43,"column":17}},"41":{"start":{"line":45,"column":0},"end":{"line":45,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":20,"column":15},"end":{"line":20,"column":16}},"loc":{"start":{"line":20,"column":25},"end":{"line":30,"column":2}},"line":20},"9":{"name":"(anonymous_9)","decl":{"start":{"line":20,"column":59},"end":{"line":20,"column":60}},"loc":{"start":{"line":20,"column":72},"end":{"line":30,"column":1}},"line":20},"10":{"name":"(anonymous_10)","decl":{"start":{"line":31,"column":14},"end":{"line":31,"column":15}},"loc":{"start":{"line":31,"column":24},"end":{"line":44,"column":2}},"line":31},"11":{"name":"(anonymous_11)","decl":{"start":{"line":31,"column":58},"end":{"line":31,"column":59}},"loc":{"start":{"line":31,"column":71},"end":{"line":44,"column":1}},"line":31}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":22,"column":4},"end":{"line":23,"column":48}},"type":"if","locations":[{"start":{"line":22,"column":4},"end":{"line":23,"column":48}},{"start":{"line":22,"column":4},"end":{"line":23,"column":48}}],"line":22},"9":{"loc":{"start":{"line":25,"column":4},"end":{"line":26,"column":53}},"type":"if","locations":[{"start":{"line":25,"column":4},"end":{"line":26,"column":53}},{"start":{"line":25,"column":4},"end":{"line":26,"column":53}}],"line":25},"10":{"loc":{"start":{"line":34,"column":4},"end":{"line":35,"column":49}},"type":"if","locations":[{"start":{"line":34,"column":4},"end":{"line":35,"column":49}},{"start":{"line":34,"column":4},"end":{"line":35,"column":49}}],"line":34},"11":{"loc":{"start":{"line":38,"column":4},"end":{"line":40,"column":5}},"type":"if","locations":[{"start":{"line":38,"column":4},"end":{"line":40,"column":5}},{"start":{"line":38,"column":4},"end":{"line":40,"column":5}}],"line":38},"12":{"loc":{"start":{"line":38,"column":8},"end":{"line":38,"column":58}},"type":"binary-expr","locations":[{"start":{"line":38,"column":8},"end":{"line":38,"column":18}},{"start":{"line":38,"column":22},"end":{"line":38,"column":58}}],"line":38}},"s":{"0":1,"1":10,"2":0,"3":13,"4":10,"5":10,"6":3,"7":0,"8":0,"9":0,"10":13,"11":13,"12":1,"13":3,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":7,"22":7,"23":7,"24":4,"25":3,"26":3,"27":1,"28":2,"29":2,"30":2,"31":1,"32":6,"33":6,"34":6,"35":3,"36":3,"37":3,"38":2,"39":1,"40":1,"41":1},"f":{"0":13,"1":10,"2":0,"3":13,"4":10,"5":0,"6":13,"7":3,"8":7,"9":7,"10":6,"11":6},"b":{"0":[1,1,1],"1":[10,0],"2":[13,13],"3":[3,10],"4":[13,13],"5":[1,1,1],"6":[3,0],"7":[3,3],"8":[4,3],"9":[1,2],"10":[3,3],"11":[2,1],"12":[3,2]},"inputSourceMap":{"version":3,"file":"C:/Users/pedro/dev/personal/digital-back-end/src/services/userServices.ts","sources":["C:/Users/pedro/dev/personal/digital-back-end/src/services/userServices.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,sEAA8C;AAE9C,sEAA8C;AAC9C,gDAAuD;AACvD,0DAAqC;AACrC,gDAAmD;AAEnD,MAAM,MAAM,GAAG,CAAO,IAAc,EAAE,EAAE;IACtC,MAAM,YAAY,GAAG,IAAA,oBAAQ,EAAC,IAAI,CAAC,CAAC;IAEpC,IAAI,YAAY,CAAC,KAAK;QAAE,MAAM,oBAAU,CAAC,YAAY,CAAC;IAEtD,MAAM,UAAU,GAAG,MAAM,oBAAU,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACxD,IAAI,UAAU;QACZ,MAAM,oBAAU,CAAC,iBAAiB,CAAC;IAErC,MAAM,YAAY,GAAG,MAAM,IAAA,2BAAe,EAAC,IAAI,CAAC,CAAC;IACjD,MAAM,oBAAU,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;IAC1C,OAAO,IAAI,CAAC;AACd,CAAC,CAAA,CAAC;AAEF,MAAM,KAAK,GAAG,CAAO,IAAe,EAAE,EAAE;IACtC,kBAAkB;IAClB,MAAM,aAAa,GAAG,IAAA,qBAAS,EAAC,IAAI,CAAC,CAAC;IACtC,IAAI,aAAa,CAAC,KAAK;QAAE,MAAM,oBAAU,CAAC,aAAa,CAAC;IAExD,gCAAgC;IAChC,MAAM,SAAS,GAAG,MAAM,oBAAU,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAC/D,IAAI,CAAC,SAAS,IAAI,SAAS,CAAC,QAAQ,KAAK,IAAI,CAAC,QAAQ,EAAE;QACtD,MAAM,oBAAU,CAAC,gBAAgB,CAAC;KACnC;IAED,oBAAoB;IACpB,MAAM,KAAK,GAAG,eAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;IAC3C,OAAO,KAAK,CAAC;AACf,CAAC,CAAA,CAAC;AAEF,kBAAe,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC","sourcesContent":["import userModels from '../models/userModels';\r\nimport { ILoginReq, IUserReq } from '../types/user';\r\nimport userErrors from '../errors/userErrors';\r\nimport { loginAuth, userAuth } from '../lib/inputAuth';\r\nimport jwtToken from '../auth/token';\r\nimport { getCompleteUser } from '../lib/userUtils';\r\n\r\nconst create = async (user: IUserReq) => {\r\n  const userValidate = userAuth(user);\r\n\r\n  if (userValidate.error) throw userErrors.invalidInput;\r\n\r\n  const userExists = await userModels.findByCpf(user.cpf);\r\n  if (userExists)\r\n    throw userErrors.alreadyRegistered;\r\n\r\n  const completeUser = await getCompleteUser(user);\r\n  await userModels.createUser(completeUser);\r\n  return true;\r\n};\r\n\r\nconst login = async (user: ILoginReq) => {\r\n  //validate entries\r\n  const loginValidate = loginAuth(user);\r\n  if (loginValidate.error) throw userErrors.invalidFormat;\r\n\r\n  //validate user exists in the db\r\n  const foundUser = await userModels.findByAccount(user.account);\r\n  if (!foundUser || foundUser.password !== user.password) {\r\n    throw userErrors.wrongCredentials;\r\n  }\r\n\r\n  //get the user token\r\n  const token = jwtToken.generateToken(user);\r\n  return token;\r\n};\r\n\r\nexport default { create, login };\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"eb6178ff5b0a9659f241d17b43624ef4e1113220","contentHash":"2b43dc5d02158636c22f3f6cf3b079c2728c9611866de81365e856849242d34b"},"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\models\\userModels.ts":{"path":"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\models\\userModels.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":21},"end":{"line":15,"column":44}},"16":{"start":{"line":16,"column":22},"end":{"line":16,"column":63}},"17":{"start":{"line":17,"column":19},"end":{"line":22,"column":2}},"18":{"start":{"line":17,"column":29},"end":{"line":22,"column":2}},"19":{"start":{"line":18,"column":17},"end":{"line":18,"column":60}},"20":{"start":{"line":19,"column":17},"end":{"line":19,"column":40}},"21":{"start":{"line":20,"column":25},"end":{"line":20,"column":51}},"22":{"start":{"line":21,"column":4},"end":{"line":21,"column":24}},"23":{"start":{"line":23,"column":18},"end":{"line":31,"column":2}},"24":{"start":{"line":23,"column":27},"end":{"line":31,"column":2}},"25":{"start":{"line":24,"column":17},"end":{"line":24,"column":60}},"26":{"start":{"line":25,"column":17},"end":{"line":25,"column":40}},"27":{"start":{"line":26,"column":23},"end":{"line":26,"column":47}},"28":{"start":{"line":27,"column":22},"end":{"line":27,"column":48}},"29":{"start":{"line":28,"column":4},"end":{"line":29,"column":21}},"30":{"start":{"line":29,"column":8},"end":{"line":29,"column":21}},"31":{"start":{"line":30,"column":4},"end":{"line":30,"column":16}},"32":{"start":{"line":32,"column":29},"end":{"line":37,"column":2}},"33":{"start":{"line":32,"column":35},"end":{"line":37,"column":2}},"34":{"start":{"line":33,"column":17},"end":{"line":33,"column":60}},"35":{"start":{"line":34,"column":17},"end":{"line":34,"column":50}},"36":{"start":{"line":35,"column":26},"end":{"line":35,"column":126}},"37":{"start":{"line":36,"column":4},"end":{"line":36,"column":25}},"38":{"start":{"line":38,"column":22},"end":{"line":41,"column":2}},"39":{"start":{"line":38,"column":35},"end":{"line":41,"column":2}},"40":{"start":{"line":39,"column":23},"end":{"line":39,"column":79}},"41":{"start":{"line":40,"column":4},"end":{"line":40,"column":22}},"42":{"start":{"line":42,"column":0},"end":{"line":42,"column":81}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":17,"column":19},"end":{"line":17,"column":20}},"loc":{"start":{"line":17,"column":29},"end":{"line":22,"column":2}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":17,"column":63},"end":{"line":17,"column":64}},"loc":{"start":{"line":17,"column":76},"end":{"line":22,"column":1}},"line":17},"10":{"name":"(anonymous_10)","decl":{"start":{"line":23,"column":18},"end":{"line":23,"column":19}},"loc":{"start":{"line":23,"column":27},"end":{"line":31,"column":2}},"line":23},"11":{"name":"(anonymous_11)","decl":{"start":{"line":23,"column":61},"end":{"line":23,"column":62}},"loc":{"start":{"line":23,"column":74},"end":{"line":31,"column":1}},"line":23},"12":{"name":"(anonymous_12)","decl":{"start":{"line":32,"column":29},"end":{"line":32,"column":30}},"loc":{"start":{"line":32,"column":35},"end":{"line":37,"column":2}},"line":32},"13":{"name":"(anonymous_13)","decl":{"start":{"line":32,"column":69},"end":{"line":32,"column":70}},"loc":{"start":{"line":32,"column":82},"end":{"line":37,"column":1}},"line":32},"14":{"name":"(anonymous_14)","decl":{"start":{"line":38,"column":22},"end":{"line":38,"column":23}},"loc":{"start":{"line":38,"column":35},"end":{"line":41,"column":2}},"line":38},"15":{"name":"(anonymous_15)","decl":{"start":{"line":38,"column":69},"end":{"line":38,"column":70}},"loc":{"start":{"line":38,"column":82},"end":{"line":41,"column":1}},"line":38}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":28,"column":4},"end":{"line":29,"column":21}},"type":"if","locations":[{"start":{"line":28,"column":4},"end":{"line":29,"column":21}},{"start":{"line":28,"column":4},"end":{"line":29,"column":21}}],"line":28}},"s":{"0":1,"1":25,"2":2,"3":14,"4":25,"5":25,"6":0,"7":0,"8":0,"9":0,"10":39,"11":14,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":4,"19":4,"20":4,"21":4,"22":4,"23":1,"24":2,"25":2,"26":2,"27":2,"28":2,"29":2,"30":1,"31":1,"32":1,"33":3,"34":3,"35":3,"36":3,"37":3,"38":1,"39":5,"40":5,"41":5,"42":1},"f":{"0":14,"1":25,"2":2,"3":14,"4":25,"5":0,"6":39,"7":1,"8":4,"9":4,"10":2,"11":2,"12":3,"13":3,"14":5,"15":5},"b":{"0":[1,1,1],"1":[23,2],"2":[14,14],"3":[14,25],"4":[14,14],"5":[1,1,1],"6":[1,0],"7":[1,1],"8":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/pedro/dev/personal/digital-back-end/src/models/userModels.ts","sources":["C:/Users/pedro/dev/personal/digital-back-end/src/models/userModels.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,6CAAiD;AACjD,gEAAwC;AAExC,MAAM,UAAU,GAAG,CAAO,IAAS,EAAE,EAAE;IACrC,MAAM,IAAI,GAAG,MAAM,IAAA,8BAAiB,GAAE,CAAC;IACvC,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;IACrC,MAAM,YAAY,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;IAChD,OAAO,YAAY,CAAC;AACtB,CAAC,CAAA,CAAC;AAEF,MAAM,SAAS,GAAG,CAAO,GAAW,EAAE,EAAE;IACtC,MAAM,IAAI,GAAG,MAAM,IAAA,8BAAiB,GAAE,CAAC;IACvC,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;IACrC,MAAM,UAAU,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,EAAC,GAAG,EAAC,CAAC,CAAC;IAC1C,MAAM,SAAS,GAAG,MAAM,UAAU,CAAC,OAAO,EAAE,CAAC;IAE7C,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC;QAAE,OAAO,KAAK,CAAC;IACzC,OAAO,IAAI,CAAC;AACd,CAAC,CAAA,CAAC;AAEF,MAAM,oBAAoB,GAAG,GAAS,EAAE;IACtC,MAAM,IAAI,GAAG,MAAM,IAAA,8BAAiB,GAAE,CAAC;IACvC,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,CAAC;IAC/C,MAAM,aAAa,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAC/C,EAAE,EACF,EAAE,IAAI,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,EAAE,EACxB,EAAE,cAAc,EAAE,OAAO,EAAE,MAAM,EAAE,IAAI,EAAE,CAC1C,CAAC;IAEF,OAAO,aAAa,CAAC;AACvB,CAAC,CAAA,CAAC;AAMF,MAAM,aAAa,GAAgB,CAAO,OAAO,EAAE,EAAE;IACnD,MAAM,UAAU,GAAG,MAAM,qBAAW,CAAC,OAAO,CAAC,EAAC,OAAO,EAAC,EAAC,MAAM,CAAC,CAAC;IAC/D,OAAO,UAAU,CAAC;AACpB,CAAC,CAAA,CAAA;AAED,kBAAe,EAAE,UAAU,EAAE,SAAS,EAAC,oBAAoB,EAAC,aAAa,EAAE,CAAC","sourcesContent":["import { Document } from 'mongodb';\r\nimport { connectToDatabase } from './connection';\r\nimport mongoModels from './mongoModels';\r\n\r\nconst createUser = async (user: any) => {\r\n  const conn = await connectToDatabase();\r\n  const coll = conn.collection('user');\r\n  const createResult = await coll.insertOne(user);\r\n  return createResult;\r\n};\r\n\r\nconst findByCpf = async (cpf: string) => {\r\n  const conn = await connectToDatabase();\r\n  const coll = conn.collection('user');\r\n  const findResult = await coll.find({cpf});\r\n  const findArray = await findResult.toArray();\r\n\r\n  if (findArray.length === 0) return false;\r\n  return true;\r\n};\r\n\r\nconst findAndUpdateCounter = async () => {\r\n  const conn = await connectToDatabase();\r\n  const coll = conn.collection('accountCounter');\r\n  const counterResult = await coll.findOneAndUpdate(\r\n    {},\r\n    { $inc: { counter: 1 } },\r\n    { returnDocument: 'after', upsert: true }\r\n  );\r\n  \r\n  return counterResult;\r\n};\r\n\r\ninterface IFindAccount {\r\n  (account: string) : Document | null;\r\n}\r\n\r\nconst findByAccount:IFindAccount = async (account) => {\r\n  const findResult = await mongoModels.findOne({account},'user');\r\n  return findResult;\r\n}\r\n\r\nexport default { createUser, findByCpf,findAndUpdateCounter,findByAccount };\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ceb07361a08a0f46c79e1e4279e8e8eb874059ee","contentHash":"a9d0e41b3df83e9571b984829d0a0cb0b669e106f37170a58fa88d1973aef87d"},"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\errors\\userErrors.ts":{"path":"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\errors\\userErrors.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":56}},"2":{"start":{"line":4,"column":19},"end":{"line":21,"column":1}},"3":{"start":{"line":22,"column":0},"end":{"line":22,"column":29}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/pedro/dev/personal/digital-back-end/src/errors/userErrors.ts","sources":["C:/Users/pedro/dev/personal/digital-back-end/src/errors/userErrors.ts"],"names":[],"mappings":";;AAAA,yDAAgD;AAEhD,MAAM,UAAU,GAAG;IACjB,gBAAgB,EAAE;QAChB,MAAM,EAAE,+BAAW,CAAC,YAAY;QAChC,OAAO,EAAE,gDAAgD;KAC1D;IACD,aAAa,EAAE;QACb,MAAM,EAAE,+BAAW,CAAC,WAAW;QAC/B,OAAO,EACL,uFAAuF;KAC1F;IACD,YAAY,EAAE;QACZ,MAAM,EAAE,+BAAW,CAAC,kBAAkB;QACtC,OAAO,EAAE,qBAAqB;KAC/B;IACD,iBAAiB,EAAE;QACjB,MAAM,EAAE,+BAAW,CAAC,kBAAkB;QACtC,OAAO,EAAE,6BAA6B;KACvC;CACF,CAAC;AAEF,kBAAe,UAAU,CAAC","sourcesContent":["import { StatusCodes } from 'http-status-codes';\r\n\r\nconst userErrors = {\r\n  wrongCredentials: {\r\n    status: StatusCodes.UNAUTHORIZED,\r\n    message: 'Incorrect or not existent account and password',\r\n  },\r\n  invalidFormat: {\r\n    status: StatusCodes.BAD_REQUEST,\r\n    message:\r\n      'Invalid format. Account is a string of 5 digits and password is a string of 6 digits.',\r\n  },\r\n  invalidInput: {\r\n    status: StatusCodes.EXPECTATION_FAILED,\r\n    message: 'Name or cpf invalid',\r\n  },\r\n  alreadyRegistered: {\r\n    status: StatusCodes.EXPECTATION_FAILED,\r\n    message: 'Cpf already have an account',\r\n  },\r\n};\r\n\r\nexport default userErrors;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7c8a90fe4dc0c9671c0fc1e93b956d402e77b6ef","contentHash":"d4b50fd808a4b185aeeb28ae6bbd437ed299855664db39de74f1037f3eda783a"},"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\lib\\inputAuth.ts":{"path":"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\lib\\inputAuth.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":46}},"4":{"start":{"line":7,"column":14},"end":{"line":7,"column":45}},"5":{"start":{"line":8,"column":20},"end":{"line":11,"column":2}},"6":{"start":{"line":12,"column":19},"end":{"line":16,"column":2}},"7":{"start":{"line":17,"column":18},"end":{"line":19,"column":1}},"8":{"start":{"line":18,"column":4},"end":{"line":18,"column":38}},"9":{"start":{"line":20,"column":0},"end":{"line":20,"column":30}},"10":{"start":{"line":21,"column":17},"end":{"line":23,"column":1}},"11":{"start":{"line":22,"column":4},"end":{"line":22,"column":37}},"12":{"start":{"line":24,"column":0},"end":{"line":24,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":17,"column":18},"end":{"line":17,"column":19}},"loc":{"start":{"line":17,"column":28},"end":{"line":19,"column":1}},"line":17},"2":{"name":"(anonymous_2)","decl":{"start":{"line":21,"column":17},"end":{"line":21,"column":18}},"loc":{"start":{"line":21,"column":27},"end":{"line":23,"column":1}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":6,"9":1,"10":1,"11":7,"12":1},"f":{"0":1,"1":6,"2":7},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/pedro/dev/personal/digital-back-end/src/lib/inputAuth.ts","sources":["C:/Users/pedro/dev/personal/digital-back-end/src/lib/inputAuth.ts"],"names":[],"mappings":";;;;;;AAAA,8CAAsB;AAGtB,MAAM,WAAW,GAAG,aAAG,CAAC,MAAM,CAAC;IAC7B,OAAO,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE;IAC1C,QAAQ,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE;CAC5C,CAAC,CAAC;AAEH,MAAM,UAAU,GAAG,aAAG,CAAC,MAAM,CAAC;IAC5B,IAAI,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IAC7B,GAAG,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,QAAQ,EAAE;IAC5C,QAAQ,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE;CAC5C,CAAC,CAAC;AAGI,MAAM,SAAS,GAAG,CAAC,IAAc,EAAE,EAAE;IAC1C,OAAO,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;AACpC,CAAC,CAAC;AAFW,QAAA,SAAS,aAEpB;AAEK,MAAM,QAAQ,GAAG,CAAC,IAAa,EAAE,EAAE;IACxC,OAAO,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;AACnC,CAAC,CAAA;AAFY,QAAA,QAAQ,YAEpB","sourcesContent":["import Joi from 'joi';\r\nimport { ILoginReq, IUserReq } from '../types/user';\r\n\r\nconst loginSchema = Joi.object({\r\n  account: Joi.string().length(5).required(),\r\n  password: Joi.string().length(6).required(),\r\n});\r\n\r\nconst userSchema = Joi.object({\r\n  name: Joi.string().required(),\r\n  cpf: Joi.string().min(11).max(14).required(),\r\n  password: Joi.string().length(6).required(),\r\n});\r\n\r\n\r\nexport const loginAuth = (user:ILoginReq) => {\r\n  return loginSchema.validate(user);\r\n};\r\n\r\nexport const userAuth = (user:IUserReq) => {\r\n  return userSchema.validate(user);\r\n}\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"620ea42ec0c7c909c9ec6ff01544e2cf82692ed9","contentHash":"ec3115ae322c8ee4f30b76cdb1220f5b9d3c96ec9f9772032c55d4903b04dec2"},"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\lib\\userUtils.ts":{"path":"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\lib\\userUtils.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":60}},"16":{"start":{"line":16,"column":21},"end":{"line":16,"column":69}},"17":{"start":{"line":17,"column":25},"end":{"line":22,"column":2}},"18":{"start":{"line":17,"column":31},"end":{"line":22,"column":2}},"19":{"start":{"line":18,"column":28},"end":{"line":18,"column":77}},"20":{"start":{"line":19,"column":27},"end":{"line":19,"column":56}},"21":{"start":{"line":20,"column":25},"end":{"line":20,"column":59}},"22":{"start":{"line":21,"column":4},"end":{"line":21,"column":24}},"23":{"start":{"line":23,"column":0},"end":{"line":23,"column":44}},"24":{"start":{"line":24,"column":22},"end":{"line":24,"column":23}},"25":{"start":{"line":25,"column":24},"end":{"line":28,"column":2}},"26":{"start":{"line":25,"column":34},"end":{"line":28,"column":2}},"27":{"start":{"line":26,"column":26},"end":{"line":26,"column":63}},"28":{"start":{"line":27,"column":4},"end":{"line":27,"column":101}},"29":{"start":{"line":29,"column":0},"end":{"line":29,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":17,"column":25},"end":{"line":17,"column":26}},"loc":{"start":{"line":17,"column":31},"end":{"line":22,"column":2}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":17,"column":65},"end":{"line":17,"column":66}},"loc":{"start":{"line":17,"column":78},"end":{"line":22,"column":1}},"line":17},"10":{"name":"(anonymous_10)","decl":{"start":{"line":25,"column":24},"end":{"line":25,"column":25}},"loc":{"start":{"line":25,"column":34},"end":{"line":28,"column":2}},"line":25},"11":{"name":"(anonymous_11)","decl":{"start":{"line":25,"column":68},"end":{"line":25,"column":69}},"loc":{"start":{"line":25,"column":81},"end":{"line":28,"column":1}},"line":25}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":4,"2":0,"3":4,"4":4,"5":4,"6":0,"7":0,"8":0,"9":0,"10":8,"11":4,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":2,"19":2,"20":2,"21":2,"22":2,"23":1,"24":1,"25":1,"26":2,"27":2,"28":2,"29":1},"f":{"0":4,"1":4,"2":0,"3":4,"4":4,"5":0,"6":8,"7":1,"8":2,"9":2,"10":2,"11":2},"b":{"0":[1,1,1],"1":[4,0],"2":[4,4],"3":[4,4],"4":[4,4],"5":[1,1,1],"6":[1,0],"7":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/pedro/dev/personal/digital-back-end/src/lib/userUtils.ts","sources":["C:/Users/pedro/dev/personal/digital-back-end/src/lib/userUtils.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,sEAA8C;AAGvC,MAAM,gBAAgB,GAAG,GAAS,EAAE;IACzC,MAAM,eAAe,GAAG,MAAM,oBAAU,CAAC,oBAAoB,EAAS,CAAC;IACvE,MAAM,cAAc,GAAG,eAAe,CAAC,KAAK,CAAC,OAAO,CAAC;IACrD,MAAM,YAAY,GAAG,QAAQ,cAAc,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IAExD,OAAO,YAAY,CAAC;AACtB,CAAC,CAAA,CAAC;AANW,QAAA,gBAAgB,oBAM3B;AAEF,MAAM,aAAa,GAAG,CAAC,CAAC;AAEjB,MAAM,eAAe,GAAG,CAAO,IAAc,EAAE,EAAE;IACtD,MAAM,aAAa,GAAG,MAAM,IAAA,wBAAgB,GAAE,CAAC;IAC/C,qCACE,OAAO,EAAE,aAAa,IACnB,IAAI,KACP,MAAM,EAAE,aAAa,IACrB;AACJ,CAAC,CAAA,CAAC;AAPW,QAAA,eAAe,mBAO1B","sourcesContent":["import userModels from \"../models/userModels\";\r\nimport { IUserReq } from \"../types/user\";\r\n\r\nexport const getAccountNumber = async () => {\r\n  const mongoNumberFind = await userModels.findAndUpdateCounter() as any;\r\n  const absoluteNumber = mongoNumberFind.value.counter;\r\n  const maskedNumber = `00000${absoluteNumber}`.slice(-5);\r\n\r\n  return maskedNumber;\r\n};\r\n\r\nconst initialWallet = 0;\r\n\r\nexport const getCompleteUser = async (user: IUserReq) => {\r\n  const accountNumber = await getAccountNumber();\r\n  return {\r\n    account: accountNumber,\r\n    ...user,\r\n    wallet: initialWallet,\r\n  };\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"140857b1fde7f413d02e4e8e4547afbc1063cb1c","contentHash":"3f63242c383a2cf4795feb7fc743f60a556a5fd3d944ab2b31bac427b3110b36"},"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\tests\\mongo.ts":{"path":"C:\\Users\\pedro\\dev\\personal\\digital-back-end\\src\\tests\\mongo.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"13":{"start":{"line":12,"column":18},"end":{"line":12,"column":36}},"14":{"start":{"line":13,"column":32},"end":{"line":13,"column":64}},"15":{"start":{"line":14,"column":14},"end":{"line":14,"column":64}},"16":{"start":{"line":15,"column":22},"end":{"line":22,"column":2}},"17":{"start":{"line":15,"column":28},"end":{"line":22,"column":2}},"18":{"start":{"line":16,"column":20},"end":{"line":16,"column":42}},"19":{"start":{"line":17,"column":20},"end":{"line":20,"column":5}},"20":{"start":{"line":21,"column":4},"end":{"line":21,"column":59}},"21":{"start":{"line":23,"column":0},"end":{"line":23,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":15,"column":22},"end":{"line":15,"column":23}},"loc":{"start":{"line":15,"column":28},"end":{"line":22,"column":2}},"line":15},"8":{"name":"(anonymous_8)","decl":{"start":{"line":15,"column":62},"end":{"line":15,"column":63}},"loc":{"start":{"line":15,"column":75},"end":{"line":22,"column":1}},"line":15}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8}},"s":{"0":1,"1":9,"2":0,"3":9,"4":9,"5":9,"6":0,"7":0,"8":0,"9":0,"10":18,"11":9,"12":1,"13":1,"14":1,"15":1,"16":1,"17":9,"18":9,"19":9,"20":9,"21":1},"f":{"0":9,"1":9,"2":0,"3":9,"4":9,"5":0,"6":18,"7":9,"8":9},"b":{"0":[1,1,1],"1":[9,0],"2":[9,9],"3":[9,9],"4":[9,9]},"inputSourceMap":{"version":3,"file":"C:/Users/pedro/dev/personal/digital-back-end/src/tests/mongo.ts","sources":["C:/Users/pedro/dev/personal/digital-back-end/src/tests/mongo.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,qCAAsD;AACtD,iEAA0D;AAE1D,MAAM,KAAK,GAAG,yCAAiB,CAAC,MAAM,EAAE,CAAC;AAEzC,MAAM,aAAa,GAAG,GAAS,EAAE;IAC/B,MAAM,OAAO,GAAG,CAAC,MAAM,KAAK,CAAC,CAAC,MAAM,EAAE,CAAC;IACvC,MAAM,OAAO,GAAG;QACd,eAAe,EAAE,IAAI;QACrB,kBAAkB,EAAE,IAAI;KACzB,CAAC;IAEF,OAAO,qBAAW,CAAC,OAAO,CAAC,OAAO,EAAE,OAAyB,CAAC,CAAC;AACjE,CAAC,CAAA,CAAC;AAEF,kBAAe,aAAa,CAAC","sourcesContent":["import { ConnectOptions, MongoClient } from 'mongodb';\r\nimport { MongoMemoryServer } from 'mongodb-memory-server';\r\n\r\nconst mongo = MongoMemoryServer.create();\r\n\r\nconst getConnection = async () => {\r\n  const mockUri = (await mongo).getUri();\r\n  const options = {\r\n    useNewUrlParser: true,\r\n    useUnifiedTopology: true,\r\n  };\r\n\r\n  return MongoClient.connect(mockUri, options as ConnectOptions);\r\n};\r\n\r\nexport default getConnection;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"37ec0ee2bac7767a4a7045fc366f1c8b2004114a","contentHash":"583b6de67cc82218c6d1d6d90215d7f769160a599cba92c63e1f9cfe73defbd0"}}